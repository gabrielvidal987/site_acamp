<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pontuação Geral</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="pontuacao_style.css">
    <style></style>
</head>
<body>
    <div class="container has-text-centered title-pontuacao">
        <h1>PONTUAÇÃO DA UNIDADE</br></h1>
        <h1 id="pontuacao_h1"></h1>
        <img id="img_logo_unidade">
    </div>
    <section class="section">
        <div class="container">
            <div class="columns is-multiline" id="cards-container">
                <!-- Os cards serão inseridos aqui -->
            </div>
        </div>
    </section>
    <script>
        const urlServ = 'http://localhost:3000';
        // const urlServ = 'http://192.168.1.3:3000';
        const cardsContainer = document.getElementById('cards-container');
        function load_data() {
            document.getElementById('pontuacao_h1').innerHTML = localStorage.getItem('unidade_nome')
            document.getElementById('img_logo_unidade').src = localStorage.getItem('unidade_logo')
            const atividades = [
                { nome: "atividade 1", arte: "atividade_exemplo.png"},
                { nome: "atividade 2", arte: "atividade_exemplo.png"},
                { nome: "atividade 3", arte: "atividade_exemplo.png"},
                { nome: "atividade 4", arte: "atividade_exemplo.png"},
                { nome: "atividade 5", arte: "atividade_exemplo.png"},
                { nome: "atividade 6", arte: "atividade_exemplo.png"},
            ]
            atividades.forEach(atividade => {
                const produto_div = document.createElement('div');
                produto_div.className = 'column ';
                produto_div.innerHTML = `
                    <div>
                        <div class="card-content has-text-centered">
                            <p class="title">${atividade.nome}</p>
                            <img src="${atividade.arte}" alt="${atividade.nome}">
                            <p class="subtitle">PONTUAÇÃO:</p>
                            <button class="btnoper decrement" onclick="alterar_valor('${atividade.nome}','subtrair')">-</button>
                            <input type="number" class="quantity" value="0" id="pontos${atividade.nome}" readonly>
                            <button class="btnoper increment" onclick="alterar_valor('${atividade.nome}','somar')">+</button>
                        </div>
                    </div>
                `;
                cardsContainer.appendChild(produto_div);
            });
        }
        // função para alterar a quantidade
        function alterar_valor(atividade_nome,operacao) {
            var pontos = document.getElementById(`pontos${atividade_nome}`)
            // Obtém o valor atual como número
            var valorAtual = parseInt(pontos.value) || 0; // Usa 0 se o valor não for um número
            if (operacao == "subtrair") {
                if (valorAtual > 0) { // Verifica se pode subtrair
                    pontos.value = valorAtual - 1; // Decrementa
                }
            } else if (operacao == "somar") {
                pontos.value = valorAtual + 1; // Incrementa
            }
        };
        console.log(`UNIDADE APRESENTADA: ${localStorage.getItem('unidade_nome')}`)
        load_data()
    </script>
</body>
</html>
